{% extends 'account/base-with-navbar.html' %}

{% block header_scripts %}
    {% load static %}
    <link rel="stylesheet" type="text/css" href="{% static 'user_management/css/user_edit.css' %}">

    <script>
        $(document).ready(function(){
          $('[data-toggle="tooltip"]').tooltip();
        });
    </script>
{% endblock %}


<!-- Left panel -->

{% block left_title %}
    Your digital portrait
{% endblock left_title %}

{% block left_subtitle %}
    Keep your personal data up to date and participate in the MapStand community.
{% endblock left_subtitle %}

{% block left_image %}
    <img class="main-image" src="{% static "user_management/img/test-laptop-man.png" %}"/>
{% endblock left_image %}


{% block right_action %}
<!-- Right/ mobile panel -->

    <div class="form-box common-input-form">

        {% if fix_error %}
            <div id="error_dialog" class="alert alert-danger" role="alert">
                <strong>User data cannot be empty!</strong> Fill the form and try again!
            </div>
        {% endif %}
        {% if success %}
            <div id="success_dialog" class="alert alert-success" role="alert">
                <strong>Information successfully updated!</strong>
            </div>
        {% endif %}

        <div class="user-edit-form-box">
            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" style="border-bottom:#green;" id="account-tab" data-bs-toggle="tab" data-bs-target="#account" type="button" role="tab" aria-controls="account" aria-selected="true">
                        <img class="custom-link-img" src="{% static "images/account_and_marketing.png" %}"/>
                        Account info &amp; marketing</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="api-tab" data-bs-toggle="tab" data-bs-target="#api" type="button" role="tab" aria-controls="api" aria-selected="false">
                    <img class="custom-link-img" src="{% static "images/type_and_api.png" %}"/>
                    Account Type &amp; API key</button>
                </li>
            </ul>
            <form role="form" method="post" class="update-user-account" action="{% url 'user_account_edit' id=object.id %}">
                {% csrf_token %}
                <div >
                    <div class="tab-content" id="editProfileTabContent">
                        <div class="tab-pane fade show active" id="account" role="tabpanel" aria-labelledby="account-tab">
                            <br>
                            <div class="card border-light">
                                <div class="card-header">Account Info</div>
                                <div class="card-body">
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label" for="first_name">First Name</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control input-lg" name="first_name" id="id_first_name" required
                                                placeholder="Enter first name"
                                                    {% if form.first_name.value %}
                                                value="{{ form.first_name.value }}" {% endif %}>
                                            {{ form.first_name.errors }}
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label" for="last_name">Last Name</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control input-lg" name="last_name" id="id_last_name" required
                                                placeholder="Enter last name password" \
                                                    {% if form.last_name.value %}
                                                value="{{ form.last_name.value }}" {% endif %}>
                                            {{ form.last_name.errors }}
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label" for="email">Email</label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control input-lg" name="email" id="id_email" required
                                                placeholder="{{ form.email.value }}" \
                                                    {% if form.email.value %}
                                                value="{{ form.email.value }}" {% endif %}>
                                            {{ form.email.errors }}
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label" for="secondary_email">
                                            Secondary Email
                                            <i class="fas fa-info-circle" style="color:lightgrey;" data-toggle="tooltip"
                                            data-placement="right" title="This email will be used for the account recovery."></i>
                                        </label>
                                        <div class="col-sm-8">
                                            <input type="text" class="form-control input-lg" name="secondary_email" id="id_secondary_email"
                                                placeholder="" \
                                                    {% if form.secondary_email.value %}
                                                value="{{ form.secondary_email.value }}" {% endif %}>
                                            {{ form.secondary_email.errors }}
                                        </div>
                                    </div>
                                    <div class="form-group row">
                                        <label class="col-sm-4 col-form-label" for="change_password">
                                            Change Password
                                        </label>
                                        <div class="col-sm-8">
                                            <a href="{% url 'password_change' %}" class="change-password-link">
                                                Change password
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br>
                            <div class="card border-light">
                                <div class="card-header">Email Notifications</div>
                                <small style="text-align:left">You may unsubscribe entirely from our marketing communication, or from out newsfeed activity. Other email such as company news and techincal notifications may not be opted-out.</small>
                                <div class="card-body">
                                    <div class="form-group row">
                                        <label class="col-sm-11 col-form-label" for="first_name">Get Market updates, promotions, newsfeed and tutorial tips</label>
                                        <div class="col-sm-1">
                                            <label class="switch" readonly>
                                            {{ subscription }}
                                            <span class="slider round"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="api" role="tabpanel" aria-labelledby="api-tab">Account Type &amp; API key form here</div>
                    </div>
                </div>
                <br>
                <div class="footer navbar-fixed-bottom">
                    <input class="submit-button btn btn-success" type="submit" value="Update Profile">
                </div>
            </form>
        </div>
    </div>



{% endblock right_action %}
